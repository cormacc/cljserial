{"version":3,"sources":["stack/pages/backend.cljs"],"mappings":"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","names":["props__38769__auto__","clj-props__38770__auto__","uix.core/glue-args","vec__84521","map__84524","cljs.core.nth","cljs.core/--destructure-map","cljs.core.get","f__38771__auto__","js/goog.DEBUG","temp__5823__auto__","stack.pages.backend/folder-list","f__38700__auto__","*current-component*-orig-val__84545","uix.core/*current-component*","*current-component*-temp-val__84546","cljs.core/map?","js/Error","js/window","js/window.uix","js/window.uix.dev","sig__38709__auto__","js/window.uix.dev.signature!","js/window.uix.dev.register!","folders","on-folder-click","uix.compiler.alpha/component-element","stack.components.tables/table","uix.compiler.aot/>el","uix.compiler.attributes/interpret-attrs","iter__5480__auto__","s__84533","cljs.core/LazySeq","cljs.core/seq","cljs.core/chunked-seq?","c__5478__auto__","size__5479__auto__","cljs.core/count","b__84535","cljs.core/chunk-buffer","i__84534","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__84532","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","b","id","public","uix.compiler.attributes/keyword->string","_","vec__84551","map__84554","stack.pages.backend/folder-contents-panel","*current-component*-orig-val__84605","*current-component*-temp-val__84606","folder","items","on-item-click","s__84571","b__84573","i__84572","iter__84570","i","name","folder?","js/goog.debug.LOGGING_ENABLED","lambdaisland.glogi.log","cljs.core/identity","vec__84613","map__84616","stack.pages.backend/file-contents-panel","*current-component*-orig-val__84619","*current-component*-temp-val__84620","path","content","or__5002__auto__","vec__84622","map__84625","stack.pages.backend/file-explorer","*current-component*-orig-val__84638","*current-component*-temp-val__84639","file","stack.components.cards/card","uix.compiler.attributes/interpret-props","stack.pages.backend/test-bucket-id","vec__84646","stack.pages.backend/layout","*current-component*-orig-val__84690","*current-component*-temp-val__84691","_props","vec__84649","devices","set-devices!","uix.core/use-state","uix.hooks.alpha.use_effect","uix.core/jsfy-deps","stack.utils.supabase.get_table","stack.components.hardware/device-table","vec__84656","vec__84659","vec__84662","vec__84665","buckets","set-buckets!","bucket","set-bucket!","files","set-files!","set-file!","show-bucket-callback","show-file-callback","stack.utils.supabase/get-file","stack.utils.supabase/list-buckets","stack.utils.supabase/list-files","vec__84708","stack.pages.backend/layout-with-auth","*current-component*-orig-val__84718","*current-component*-temp-val__84719","stack.services.auth/wrap-layout","cljs.core/chunk-first"],"sourcesContent":["(ns stack.pages.backend\n  \"A page demonstrating some backend functionality provided by supabase.\n  Using react state/effect hooks for now to keep things focused (no re-frame).\n\n  TODO: Rework to detect connection failure and display an appropriate message\n  \"\n  (:require\n   ;Libs\n   [lambdaisland.glogi :as log]\n   [uix.core :refer [defui $]]\n   ;Stack\n   [stack.utils.supabase :as supabase]\n   [stack.services.auth :as auth]\n   ;App\n   [stack.components.cards :as cards]\n   [stack.components.tables :as tables]\n   [stack.components.hardware :refer [device-table]]))\n\n(defui folder-list [{:keys [folders on-folder-click]}]\n  ($ tables/table\n     ($ :caption \"Buckets\")\n     ($ :thead ($ :tr ($ :th \"Name\") ($ :th \"Public\")))\n\n     ($ :tbody\n        (for [b folders]\n          (let [id (:id b)\n                public (if (:public b)\n                         \"Y\"\n                         \"N\")]\n            ($ :tr {:key id}\n               ($ :td {:on-click (fn [^js _] (on-folder-click id))} (:name b))\n                  ;; ($ :td (:created_at b))\n                  ;; ($ :td (:updated_at b))\n               ($ :td public)\n                  ;;---\n               ))))))\n\n;; TODO: Consolidate this with components/file-table\n(defui folder-contents-panel [{:keys [folder items on-item-click]}]\n  ($ tables/table\n     ($ :caption (str \"Bucket contents (\" folder \")\"))\n     ($ :thead ($ :tr ($ :th \"Name\") ($ :th \"Created\") ($ :th \"Modified\")  ($ :th \"Size\")))\n     ($ :tbody\n        (for [i items]\n          (let [name (:name i)\n                folder? (nil? (:id i))]\n            ($ :tr {:key name} ;; (:id f) only valid for files, not folders\n               ($ :td {:on-click (if folder?\n                                   (fn [^js _] (log/info :folder folder :subfolder name))\n                                   (fn [^js _] (on-item-click name)))}\n                  name)\n               ($ :td (str (:created_at i)))\n               ($ :td (str (:updated_at i)))\n               ($ :td (str (:size (:metadata i))))))))))\n\n(defui file-contents-panel [{:keys [path content]}]\n  ($ :.flex.flex-col\n     ($ :pre (or content \"<Select a file to view its contents>\"))\n     ($ :label (or path \"<No file selected>\"))))\n\n(defui file-explorer [{:keys [folders on-folder-click folder items on-item-click file]}]\n  ($ cards/card {:title \"File explorer\"}\n     ($ :.flex.flex-col\n        ($ :.flex.flex-row\n           ($ :.flex-none\n              ($ folder-list {:folders folders :on-folder-click on-folder-click}))\n           ($ :.grow\n              ($ folder-contents-panel {:folder folder :items items :on-item-click on-item-click})))\n        ($ file-contents-panel file))))\n;; TODO: subscribe to something (?files table?) for real-time updates from this or another client\n;;       See clojurians slack / dart channel for some discussion/examples\n(def test-bucket-id \"test\")\n\n(defui layout [_props]\n\n  ($ :.flex.flex-col\n  ;; Using local state hooks rather then re-frame db here while exploring the supabase api...\n     (let [[devices set-devices!] (uix.core/use-state [])]\n       (uix.core/use-effect\n     ;; Retrieve the device table\n        (fn [] (supabase/get-table \"devices\" :then set-devices!))\n     ;; No dependencies -- i.e. don't re-run the effecthook\n        [])\n       ($ device-table {:devices devices}))\n     (let [[buckets set-buckets!] (uix.core/use-state [])\n           [bucket set-bucket!] (uix.core/use-state test-bucket-id)\n           [files set-files!] (uix.core/use-state [])\n           [file set-file!] (uix.core/use-state {:path nil :content nil})\n           show-bucket-callback (fn [bucket]\n                                  ;; Setting bucket should cause effect hook to re-run\n                                  (set-bucket! bucket))\n           show-file-callback (fn [path] (supabase/get-file {:bucket bucket :path path :then set-file!}))]\n       (uix.core/use-effect\n        (fn []\n          (supabase/list-buckets {:then set-buckets!}))\n     ;; No dependencies -- i.e. don't re-run the effecthook\n        [])\n       (uix.core/use-effect\n        (fn []\n          (supabase/list-files bucket {:then set-files!}))\n        ;; Re-run if 'bucket' changes\n        [bucket])\n       ($ file-explorer {:folders buckets :on-folder-click show-bucket-callback\n                         :folder bucket :items files :on-item-click show-file-callback\n                         :file file})\n;;\n       )))\n\n(defui layout-with-auth [_props]\n  ($ auth/wrap-layout {:layout layout}))\n"]}