{
"version":3,
"file":"module$node_modules$$supabase$realtime_js$dist$main$lib$push.js",
"lineCount":70,
"mappings":"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",
"sources":["node_modules/@supabase/realtime-js/dist/main/lib/push.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$supabase$realtime_js$dist$main$lib$push\"] = function(global,require,module,exports) {\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst constants_1 = require(\"../lib/constants\");\nclass Push {\n    /**\n     * Initializes the Push\n     *\n     * @param channel The Channel\n     * @param event The event, for example `\"phx_join\"`\n     * @param payload The payload, for example `{user_id: 123}`\n     * @param timeout The push timeout in milliseconds\n     */\n    constructor(channel, event, payload = {}, timeout = constants_1.DEFAULT_TIMEOUT) {\n        this.channel = channel;\n        this.event = event;\n        this.payload = payload;\n        this.timeout = timeout;\n        this.sent = false;\n        this.timeoutTimer = undefined;\n        this.ref = '';\n        this.receivedResp = null;\n        this.recHooks = [];\n        this.refEvent = null;\n    }\n    resend(timeout) {\n        this.timeout = timeout;\n        this._cancelRefEvent();\n        this.ref = '';\n        this.refEvent = null;\n        this.receivedResp = null;\n        this.sent = false;\n        this.send();\n    }\n    send() {\n        if (this._hasReceived('timeout')) {\n            return;\n        }\n        this.startTimeout();\n        this.sent = true;\n        this.channel.socket.push({\n            topic: this.channel.topic,\n            event: this.event,\n            payload: this.payload,\n            ref: this.ref,\n            join_ref: this.channel._joinRef(),\n        });\n    }\n    updatePayload(payload) {\n        this.payload = Object.assign(Object.assign({}, this.payload), payload);\n    }\n    receive(status, callback) {\n        var _a;\n        if (this._hasReceived(status)) {\n            callback((_a = this.receivedResp) === null || _a === void 0 ? void 0 : _a.response);\n        }\n        this.recHooks.push({ status, callback });\n        return this;\n    }\n    startTimeout() {\n        if (this.timeoutTimer) {\n            return;\n        }\n        this.ref = this.channel.socket._makeRef();\n        this.refEvent = this.channel._replyEventName(this.ref);\n        const callback = (payload) => {\n            this._cancelRefEvent();\n            this._cancelTimeout();\n            this.receivedResp = payload;\n            this._matchReceive(payload);\n        };\n        this.channel._on(this.refEvent, {}, callback);\n        this.timeoutTimer = setTimeout(() => {\n            this.trigger('timeout', {});\n        }, this.timeout);\n    }\n    trigger(status, response) {\n        if (this.refEvent)\n            this.channel._trigger(this.refEvent, { status, response });\n    }\n    destroy() {\n        this._cancelRefEvent();\n        this._cancelTimeout();\n    }\n    _cancelRefEvent() {\n        if (!this.refEvent) {\n            return;\n        }\n        this.channel._off(this.refEvent, {});\n    }\n    _cancelTimeout() {\n        clearTimeout(this.timeoutTimer);\n        this.timeoutTimer = undefined;\n    }\n    _matchReceive({ status, response, }) {\n        this.recHooks\n            .filter((h) => h.status === status)\n            .forEach((h) => h.callback(response));\n    }\n    _hasReceived(status) {\n        return this.receivedResp && this.receivedResp.status === status;\n    }\n}\nexports.default = Push;\n//# sourceMappingURL=push.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","constants_1","Push","constructor","channel","event","payload","timeout","DEFAULT_TIMEOUT","sent","timeoutTimer","undefined","ref","receivedResp","recHooks","refEvent","resend","_cancelRefEvent","send","_hasReceived","startTimeout","socket","push","topic","join_ref","_joinRef","updatePayload","assign","receive","status","callback","_a","response","_makeRef","_replyEventName","_on","_cancelTimeout","_matchReceive","setTimeout","trigger","_trigger","destroy","_off","clearTimeout","filter","h","forEach","default"]
}
