{"version":3,"sources":["stack/examples/pages/bt_terminal.cljs"],"mappings":"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","names":["props__45317__auto__","clj-props__45318__auto__","uix.core/glue-args","vec__95661","map__95664","cljs.core.nth","cljs.core/--destructure-map","cljs.core.get","f__45319__auto__","js/goog.DEBUG","temp__5823__auto__","stack.examples.pages.bt-terminal/term-widget-dbfx","f__45248__auto__","*current-component*-orig-val__95671","uix.core/*current-component*","*current-component*-temp-val__95672","cljs.core/map?","js/Error","js/window","js/window.uix","js/window.uix.dev","sig__45257__auto__","js/window.uix.dev.signature!","js/window.uix.dev.register!","event-sub","tx-event-id","props","events","G__95665","stack.utils.dbfx/use-sub","uix.compiler.alpha/component-element","p1__95653#","stack.components.term/term-widget","cljs.core/seq","G__95670","stack.utils.dbfx/dispatch","f__45315__auto__","stack.examples.pages.bt-terminal/bluetooth-unsupported-message","*current-component*-orig-val__95708","*current-component*-temp-val__95709","uix.compiler.aot/>el","uix.compiler.attributes/interpret-attrs","stack.examples.pages.bt-terminal/side-panel","*current-component*-orig-val__95724","*current-component*-temp-val__95725","bt-context","stack.utils.hsm/use-sub-context","device","stack.components.bt-device/settings","cljs.core.partial","stack.services.bt/device-request-callback","G__95719","stack.examples.pages.bt-terminal/terminal-pane","*current-component*-orig-val__95734","*current-component*-temp-val__95735","bt-state","stack.utils.hsm/use-sub-state","stack.utils.hsm/in-state","stack.examples.pages.bt-terminal/layout","*current-component*-orig-val__95780","*current-component*-temp-val__95781"],"sourcesContent":["(ns stack.examples.pages.bt-terminal\n  (:require\n   [uix.core :refer [defui $]]\n   [stack.utils.dbfx :as dbfx]\n   [stack.utils.hsm :as hsm-dbfx]\n   [stack.services.bt :as bt]\n   [stack.components.bt-device :as bt-device]\n   [stack.components.term :as term]))\n\n\n(defui term-widget-dbfx [{:keys [event-sub tx-event-id] :as props}]\n  (let [events (dbfx/use-sub [event-sub])]\n    ($ term/term-widget {:events events\n                         :on-add-event #(when (seq %)\n                                          (dbfx/dispatch [tx-event-id %]))})))\n\n(defui bluetooth-unsupported-message []\n  ($ :div \"The Web Bluetooth API is not currently available. Make sure you're running Chrome, Edge or Opera and serving this page from a secure context (i.e. over a https link or from localhost).  See Mozilla documentation for more details on \" ($ :a {:href \"https://developer.mozilla.org/en-US/docs/Web/API/Bluetooth#browser_compatibility\"} \"browser support\") \", and \" ($ :a {:href \"https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts\"} \"secure contexts\") \".\"))\n\n(defui side-panel []\n  ($ :.flex.flex-col\n     (let [bt-context (hsm-dbfx/use-sub-context :bt-serial)\n           device (:device bt-context)]\n       ($ bt-device/settings\n          {:device device\n           :on-device-request (partial bt/device-request-callback (:options bt-context))\n           :on-device-forget #(dbfx/dispatch [:bt-disconnect])}))))\n\n(defui terminal-pane []\n  ($ :.flex.flex-col\n     (let [bt-state (hsm-dbfx/use-sub-state :bt-serial)]\n       (if (hsm-dbfx/in-state bt-state :unsupported)\n         ($ bluetooth-unsupported-message)\n         ($ term-widget-dbfx {:event-sub :bt-serial-events :tx-event-id :bt-serial-tx})))))\n\n(defui layout []\n  ($ :.flex.flex-row.gap-1\n     ($ :.basis-80.grow-0 ($ side-panel))\n     ($ :.basis-0.grow\n        ($ terminal-pane))))\n"]}