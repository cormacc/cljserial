{"version":3,"sources":["stack/components/files.cljc"],"mappings":"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","names":["stack.components.files/cols","f__35372__auto__","cljs.core/with-meta","args__35358__auto__","vec__63965","map__63968","cljs.core.nth","cljs.core/--destructure-map","cljs.core.get","res__35359__auto__","G__64138","cljs.core/vector?","cljs.core/first","alias__35373__auto__","replicant.alias/register!","stack.components.files/file-table","filestore","attrs","children","map__63969","info","entries","cljs.core.map","heading","cljs.core/name","iter__5480__auto__","s__64031","cljs.core/LazySeq","temp__5823__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5478__auto__","size__5479__auto__","cljs.core/count","b__64033","cljs.core/chunk-buffer","i__64032","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__64030","cljs.core/chunk-rest","cljs.core/cons","cljs.core/rest","f","cljs.core/vals","col-id","cuerdas.core.format","vec__64153","map__64156","G__64166","stack.components.files/file-card","file","readonly","map__64158","path","data","cljs.core/chunk-first"],"sourcesContent":["(ns stack.components.files\n  (:require [cuerdas.core :as str]\n            [replicant.alias :refer [defalias]]\n            [stack.components.layout :as layout]\n            [stack.components.forms :as forms]))\n\n;;TODO: Extract these from malli schema instead?\n(def cols [:path :size :created :modified :synced])\n\n(defalias file-table [{::keys [filestore] :as attrs} children]\n  (let [{:keys [info entries]} filestore]\n    [::layout/card\n     attrs\n     [::layout/header children]\n     [::layout/content\n      [:table.table\n\n       [:thead [:tr (map (fn [heading] [:th (name heading)]) cols)]]\n       [:tbody\n        (for [f (vals entries)]\n          [:tr\n           {:on {:click [[:file/read (:path f)]\n                         [:user/input :selected-file-path (:path f)]]}}\n           (map (fn [col-id] [:td (get f col-id)]) cols)])\n        [:tr [:td \"Storage\"] [:td (str/format \"%s / %s bytes\" (:used info) (:capacity info))]]]]]]))\n\n\n(defalias file-card [{::keys [file readonly]} children]\n  (let [{:keys [path data]} file]\n    [::layout/card\n     [::layout/header children]\n     [::layout/content\n      [::forms/fieldset\n       [:label.input.w-full \"Path\"\n        [:input\n         {:type \"text\" :placeholder \"/\"\n          :value path\n          :readonly readonly\n          :on {:input [[:user/input :create-file-path :event/target.value]]}}]]\n       [:textarea.textarea.w-full.h-24\n        {:placeholder \"Enter file content here...\"\n         :value data\n         :readonly readonly\n         :on {:input [[:user/input :create-file-content :event/target.value]]}}]\n       (when-not  readonly\n                 [:button.btn.btn-neutral.mt-4\n                  {:on {:click [[:file/write path data]]}}\n                  \"Save\"])]]]))\n"]}