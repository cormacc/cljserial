{"version":3,"sources":["stack/components/term.cljc"],"mappings":"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","names":["f__35372__auto__","cljs.core/with-meta","args__35358__auto__","vec__63786","cljs.core.nth","res__35359__auto__","G__63797","cljs.core/vector?","cljs.core/first","alias__35373__auto__","replicant.alias/register!","stack.components.term/input","attrs","_children","cljs.core.merge","vec__63814","G__63821","stack.components.term/event","children","command?","cljs.core._EQ_","prefix","suffix","vec__63825","G__63831","stack.components.term/container","vec__63847","G__63899","stack.components.term/terminal","events","dispatch-prefix","input-id","input-value","iter__5480__auto__","s__63857","cljs.core/LazySeq","temp__5823__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5478__auto__","size__5479__auto__","cljs.core/count","b__63859","cljs.core/chunk-buffer","i__63858","vec__63867","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__63856","cljs.core/chunk-rest","vec__63883","cljs.core/cons","cljs.core/rest","_ts","evt","cljs.core/chunk-first"],"sourcesContent":["(ns stack.components.term\n  (:require [replicant.alias :refer [defalias]]))\n\n(defalias input [attrs _children]\n  [:label.input.flex.w-auto.bg-inherit.p-0\n   \"> \"\n   [:input.grow (merge attrs {:placeholder \"Type a command and press 'Enter'...\"})]])\n\n(defalias event [attrs children]\n  (let [command? (= (::event-type attrs) :command)\n        prefix (if command? \"> \" \"\")\n        suffix (if command? \"\" \"\\n\")]\n    [:div prefix children suffix]))\n\n(defalias container [attrs children]\n  [:pre.w-full.bg-black.text-white.rounded-md.p-4\n   attrs\n   [:code\n    children]])\n\n(defalias terminal [attrs _children]\n  (let [events (::events attrs)\n        dispatch-prefix (::dispatch-prefix attrs)\n        input-id (::input-id attrs)\n        input-value (::input-value attrs)]\n    [::container\n     attrs\n     (for [[_ts evt] events]\n       [::event {::event-type (:event-type evt)} (:bytes (:event-data evt))])\n     [::input {:value input-value\n               :on {:input [[:user/input input-id :event/target.value]]\n                    :keydown [[:user/on-key \"Enter\" :event/key\n                               [[dispatch-prefix :write input-value]\n                                [:user/input input-id \"\"]]]]}}]]))\n"]}