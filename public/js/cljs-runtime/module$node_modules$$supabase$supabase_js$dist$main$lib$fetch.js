shadow$provide.module$node_modules$$supabase$supabase_js$dist$main$lib$fetch = function(global, require, module, exports) {
  var __createBinding = this && this.__createBinding || (Object.create ? function(o, m, k, k2) {
    void 0 === k2 && (k2 = k);
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = {enumerable:!0, get:function() {
        return m[k];
      }};
    }
    Object.defineProperty(o, k2, desc);
  } : function(o, m, k, k2) {
    void 0 === k2 && (k2 = k);
    o[k2] = m[k];
  }), __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function(o, v) {
    Object.defineProperty(o, "default", {enumerable:!0, value:v});
  } : function(o, v) {
    o["default"] = v;
  });
  global = this && this.__importStar || function(mod) {
    if (mod && mod.__esModule) {
      return mod;
    }
    var result = {};
    if (null != mod) {
      for (var k in mod) {
        "default" !== k && Object.prototype.hasOwnProperty.call(mod, k) && __createBinding(result, mod, k);
      }
    }
    __setModuleDefault(result, mod);
    return result;
  };
  var __awaiter = this && this.__awaiter || function(thisArg, _arguments, P, generator) {
    function adopt(value) {
      return value instanceof P ? value : new P(function(resolve) {
        resolve(value);
      });
    }
    return new (P || (P = Promise))(function(resolve, reject) {
      function fulfilled(value) {
        try {
          step(generator.next(value));
        } catch (e) {
          reject(e);
        }
      }
      function rejected(value) {
        try {
          step(generator["throw"](value));
        } catch (e) {
          reject(e);
        }
      }
      function step(result) {
        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
      }
      step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
  };
  Object.defineProperty(exports, "__esModule", {value:!0});
  exports.fetchWithAuth = exports.resolveHeadersConstructor = exports.resolveFetch = void 0;
  const node_fetch_1 = global(require("module$node_modules$$supabase$node_fetch$browser"));
  exports.resolveFetch = customFetch => {
    let _fetch;
    _fetch = customFetch ? customFetch : "undefined" === typeof fetch ? node_fetch_1.default : fetch;
    return (...args) => _fetch(...args);
  };
  exports.resolveHeadersConstructor = () => "undefined" === typeof Headers ? node_fetch_1.Headers : Headers;
  exports.fetchWithAuth = (supabaseKey, getAccessToken, customFetch) => {
    const fetch = (0,exports.resolveFetch)(customFetch), HeadersConstructor = (0,exports.resolveHeadersConstructor)();
    return (input, init) => __awaiter(void 0, void 0, void 0, function*() {
      var _a;
      const accessToken = null !== (_a = yield getAccessToken()) && void 0 !== _a ? _a : supabaseKey;
      _a = new HeadersConstructor(null === init || void 0 === init ? void 0 : init.headers);
      _a.has("apikey") || _a.set("apikey", supabaseKey);
      _a.has("Authorization") || _a.set("Authorization", `Bearer ${accessToken}`);
      return fetch(input, Object.assign(Object.assign({}, init), {headers:_a}));
    });
  };
};

//# sourceMappingURL=module$node_modules$$supabase$supabase_js$dist$main$lib$fetch.js.map
