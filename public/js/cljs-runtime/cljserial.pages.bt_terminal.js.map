{"version":3,"sources":["cljserial/pages/bt_terminal.cljs"],"mappings":"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","names":["props__39917__auto__","clj-props__39918__auto__","uix.core/glue-args","vec__56821","map__56824","cljs.core.nth","cljs.core/--destructure-map","cljs.core.get","f__39919__auto__","js/goog.DEBUG","temp__5804__auto__","cljserial.pages.bt-terminal/term-widget-dbfx","f__39838__auto__","*current-component*-orig-val__56828","uix.core/*current-component*","*current-component*-temp-val__56829","cljs.core/map?","js/Error","js/window","js/window.uix","js/window.uix.dev","sig__39847__auto__","js/window.uix.dev.signature!","js/window.uix.dev.register!","event-sub","tx-event-id","props","events","G__56825","cljserial.utils.dbfx/use-sub","uix.compiler.alpha/component-element","p1__56820#","cljserial.components.term/term-widget","cljs.core/seq","G__56827","cljserial.utils.dbfx/dispatch","f__39915__auto__","cljserial.pages.bt-terminal/bluetooth-unsupported-message","*current-component*-orig-val__56838","*current-component*-temp-val__56839","uix.compiler.aot/>el","uix.compiler.attributes/interpret-attrs","cljserial.pages.bt-terminal/side-panel","*current-component*-orig-val__56864","*current-component*-temp-val__56865","bt-context","cljserial.utils.hsm/use-sub-context","device","js/goog.debug.LOGGING_ENABLED","lambdaisland.glogi.log","cljs.core/identity","cljserial.components.bt-device/settings","cljs.core.partial","cljserial.services.bt/device-request-callback","G__56863","cljserial.pages.bt-terminal/terminal-pane","*current-component*-orig-val__56884","*current-component*-temp-val__56885","bt-state","cljserial.utils.hsm/use-sub-state","cljserial.utils.hsm/in-state","cljserial.pages.bt-terminal/layout","*current-component*-orig-val__56899","*current-component*-temp-val__56900"],"sourcesContent":["(ns cljserial.pages.bt-terminal\n  (:require\n   [lambdaisland.glogi :as log]\n   [uix.core :refer [defui $]]\n   [cljserial.utils.dbfx :as dbfx]\n   [cljserial.utils.hsm :as hsm-dbfx]\n   [cljserial.services.bt :as bt]\n   [cljserial.components.bt-device :as bt-device]\n   [cljserial.components.term :as term]))\n\n\n(defui term-widget-dbfx [{:keys [event-sub tx-event-id] :as props}]\n  (let [events (dbfx/use-sub [event-sub])]\n    ($ term/term-widget {:events events\n                         :on-add-event #(when (seq %)\n                                          (dbfx/dispatch [tx-event-id %]))})))\n\n(defui bluetooth-unsupported-message []\n  ($ :div \"The Web Bluetooth API is not currently available. Make sure you're running Chrome, Edge or Opera and serving this page from a secure context (i.e. over a https link or from localhost).  See Mozilla documentation for more details on \" ($ :a {:href \"https://developer.mozilla.org/en-US/docs/Web/API/Bluetooth#browser_compatibility\"} \"browser support\") \", and \" ($ :a {:href \"https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts\"} \"secure contexts\") \".\"))\n\n(defui side-panel []\n  ($ :.flex.flex-col\n     (let [bt-context (hsm-dbfx/use-sub-context :bt-serial)\n           device (:device bt-context)]\n       (log/debug :bt-terminal/options (:options bt-context))\n       ($ bt-device/settings\n          {:device device\n           :on-device-request (partial bt/device-request-callback (:options bt-context))\n           :on-device-forget #(dbfx/dispatch [:bt-disconnect])}))))\n    ;;  (let [cd-info (dbfx/use-sub [:cd-info])\n    ;;        sd-info (:sd-card cd-info)]\n    ;;    [($ cd-info/card cd-info)\n    ;;     ($ file-card/card {:filestore sd-info :on-file-click #(dbfx/dispatch [:bt-tx (str \"file get \" %)] )})])))\n\n(defui terminal-pane []\n  ($ :.flex.flex-col\n     (let [bt-state (hsm-dbfx/use-sub-state :bt-serial)]\n       (log/debug :terminal/layout (str \"Rendering webbluetooth hsm state \" bt-state))\n       (if (hsm-dbfx/in-state bt-state :unsupported)\n         ($ bluetooth-unsupported-message)\n         ($ term-widget-dbfx {:event-sub :bt-serial-events :tx-event-id :bt-serial-tx})))))\n\n(defui layout []\n  ($ :.flex.flex-row.gap-1\n     ($ :.basis-80.grow-0 ($ side-panel))\n     ($ :.basis-0.grow\n        ($ terminal-pane))))\n"]}