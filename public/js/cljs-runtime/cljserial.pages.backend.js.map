{"version":3,"sources":["cljserial/pages/backend.cljs"],"mappings":"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","names":["props__38176__auto__","clj-props__38177__auto__","uix.core/glue-args","vec__66040","map__66043","cljs.core.nth","cljs.core/--destructure-map","cljs.core.get","f__38178__auto__","js/goog.DEBUG","temp__5804__auto__","cljserial.pages.backend/device-table","f__38107__auto__","*current-component*-orig-val__66088","uix.core/*current-component*","*current-component*-temp-val__66089","cljs.core/map?","js/Error","js/window","js/window.uix","js/window.uix.dev","sig__38116__auto__","js/window.uix.dev.signature!","js/window.uix.dev.register!","devices","uix.compiler.alpha/component-element","cljserial.components.cards/card","cljserial.components.tables/table","uix.compiler.aot/>el","uix.compiler.attributes/interpret-attrs","iter__5523__auto__","s__66065","cljs.core/LazySeq","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__66067","cljs.core/chunk-buffer","i__66066","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__66064","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","d","vec__66107","map__66110","cljserial.pages.backend/bucket-contents-table","*current-component*-orig-val__66136","*current-component*-temp-val__66137","path","items","on-file-click","s__66117","b__66119","i__66118","iter__66116","i","name","folder?","uix.compiler.attributes/keyword->string","_","js/goog.debug.LOGGING_ENABLED","lambdaisland.glogi.log","cljs.core/identity","vec__66144","map__66147","cljserial.pages.backend/file-viewer","*current-component*-orig-val__66155","*current-component*-temp-val__66156","content","or__5045__auto__","cljserial.pages.backend/test-bucket-id","f__38174__auto__","cljserial.pages.backend/layout","*current-component*-orig-val__66199","*current-component*-temp-val__66200","vec__66175","set-devices!","uix.core/use-state","uix.hooks.alpha.use_effect","uix.core/jsfy-deps","stack.utils.supabase.get_table","vec__66183","vec__66186","vec__66189","buckets","set-buckets!","files","set-files!","file","set-file!","show-file-callback","stack.utils.supabase/get-file","stack.utils.supabase/list-buckets","stack.utils.supabase.list_files","uix.compiler.attributes/interpret-props","cljs.core/chunk-first"],"sourcesContent":["(ns cljserial.pages.backend\n  \"A page demonstrating some backend functionality provided by supabase.\n  Using react state/effect hooks for now to keep things focused (no re-frame).\"\n  (:require\n   ;Libs\n   [lambdaisland.glogi :as log]\n   [uix.core :refer [defui $]]\n   ;Stack\n   [stack.utils.supabase :as supabase]\n   ;App\n   [cljserial.components.cards :as cards]\n   [cljserial.components.tables :as tables]))\n\n\n\n(defui device-table [{:keys [devices]}]\n  ($ cards/card {:title \"Devices\"}\n     ($ tables/table\n        ($ :thead ($ :tr ($ :th \"Serial\") ($ :th \"Hardware revision\") ($ :th \"Firmware\")  ($ :th \"Bootloader\")))\n        ($ :tbody\n           (for [d devices]\n             ($ :tr {:key (:serial d)}\n                ($ :td (str (:serial d)))\n                ($ :td (str (:hardware_rev d)))\n                ($ :td (str (:firmware_rev d)))\n                ($ :td (str (:bootloader_rev d)))))))))\n\n;; (defui bucket-list [{:keys buckets}]\n;;   ($ cards/card {:title \"Buckets\"}\n;;      ($ tables/table\n;;         ($ :thead ($ :tr ($ :th \"Bucket\")))\n;;         ($ :tbody\n;;            (for [b buckets]\n;;              ($ :tr {:key}))))))\n\n(defui bucket-contents-table [{:keys [path items on-file-click]}]\n  ($ cards/card {:title (str \"Files (\" path \")\")}\n     ($ tables/table\n        ($ :thead ($ :tr ($ :th \"Name\") ($ :th \"Created\") ($ :th \"Modified\")  ($ :th \"Size\")))\n        ($ :tbody\n           (for [i items]\n             (let [name (:name i)\n                   folder? (nil? (:id i))]\n               ($ :tr {:key name} ;; (:id f) only valid for files, not folders\n                  ($ :td {:on-click (if folder?\n                                      (fn [^js _] (log/info :folder path :subfolder name))\n                                      (fn [^js _] (on-file-click name)))}\n                     name)\n                  ($ :td (str (:created_at i)))\n                  ($ :td (str (:updated_at i)))\n                  ($ :td (str (:size (:metadata i)))))))))))\n\n(defui file-viewer [{:keys [path content]}]\n  ($ cards/card {:title (or path \"<NONE>\")\n                 :children ($ :p (or content \"<NONE>\"))}))\n\n;; TODO: subscribe to something (?files table?) for real-time updates from this or another client\n;;       See clojurians slack / dart channel for some discussion/examples\n(def test-bucket-id \"test\")\n(defui layout []\n\n  ($ :.flex.flex-col\n  ;; Using local state hooks rather then re-frame db here while exploring the supabase api...\n     (let [[devices set-devices!] (uix.core/use-state [])]\n       (uix.core/use-effect\n     ;; Retrieve the device table\n        (fn [] (supabase/get-table \"devices\" :then set-devices!))\n     ;; No dependencies -- i.e. don't re-run the effecthook\n        [])\n       ($ device-table {:devices devices}))\n     (let [[buckets set-buckets!] (uix.core/use-state [])\n           [files set-files!] (uix.core/use-state [])\n           [file set-file!] (uix.core/use-state {:path nil :content nil})\n           show-file-callback (fn [path] (supabase/get-file {:bucket test-bucket-id :path path :then set-file!}))]\n       (uix.core/use-effect\n        (fn []\n          (supabase/list-buckets {:then set-buckets!})\n          (supabase/list-files test-bucket-id :then set-files!))\n     ;; No dependencies -- i.e. don't re-run the effecthook\n        [])\n       [($ bucket-contents-table {:path test-bucket-id :items files :on-file-click show-file-callback})\n        ($ file-viewer file)]\n;;\n       )))\n"]}