{"version":3,"sources":["stack/examples/re_frame/pages/bt_terminal.cljs"],"mappings":"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","names":["props__46991__auto__","props98942","uix.core/glue-args","vec__98943","map__98946","cljs.core.nth","cljs.core/--destructure-map","cljs.core.get","f__46992__auto__","js/goog.DEBUG","temp__5823__auto__","stack.examples.re-frame.pages.bt-terminal/term-widget-dbfx","f__46909__auto__","*current-component*-orig-val__98949","uix.core/*current-component*","*current-component*-temp-val__98950","cljs.core/map?","js/Error","js/Object.defineProperty","obj98952","js/window","js/window.uix","js/window.uix.dev","sig__46918__auto__","js/window.uix.dev.signature!","js/window.uix.dev.register!","event-sub","tx-event-id","props","events","G__98947","stack.utils.dbfx/use-sub","uix.compiler.alpha/component-element","p1__98940#","stack.uix.term/term-widget","cljs.core/seq","G__98948","stack.utils.dbfx/dispatch","f__46985__auto__","stack.examples.re-frame.pages.bt-terminal/bluetooth-unsupported-message","*current-component*-orig-val__98954","*current-component*-temp-val__98955","obj98957","uix.compiler.aot/>el","uix.compiler.attributes/interpret-attrs","stack.examples.re-frame.pages.bt-terminal/side-panel","*current-component*-orig-val__98960","*current-component*-temp-val__98961","obj98963","bt-context","device","stack.uix.bt-device/settings","cljs.core.partial","stack.services.bt/device-request-callback","G__98959","stack.examples.re-frame.pages.bt-terminal/terminal-pane","*current-component*-orig-val__98965","*current-component*-temp-val__98966","obj98968","bt-state","stack.utils.hsm/use-sub-state","stack.utils.hsm/in-state","stack.examples.re-frame.pages.bt-terminal/layout","*current-component*-orig-val__98970","*current-component*-temp-val__98971","obj98973"],"sourcesContent":["(ns stack.examples.re-frame.pages.bt-terminal\n  (:require\n   [uix.core :refer [defui $]]\n   [stack.utils.dbfx :as dbfx]\n   [stack.utils.hsm :as hsm-dbfx]\n   [stack.services.bt :as bt]\n   [stack.uix.bt-device :as bt-device]\n   [stack.uix.term :as term]))\n\n\n(defui term-widget-dbfx [{:keys [event-sub tx-event-id] :as props}]\n  (let [events (dbfx/use-sub [event-sub])]\n    ($ term/term-widget {:events events\n                         :on-add-event #(when (seq %)\n                                          (dbfx/dispatch [tx-event-id %]))})))\n\n(defui bluetooth-unsupported-message []\n  ($ :div \"The Web Bluetooth API is not currently available. Make sure you're running Chrome, Edge or Opera and serving this page from a secure context (i.e. over a https link or from localhost).  See Mozilla documentation for more details on \" ($ :a {:href \"https://developer.mozilla.org/en-US/docs/Web/API/Bluetooth#browser_compatibility\"} \"browser support\") \", and \" ($ :a {:href \"https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts\"} \"secure contexts\") \".\"))\n\n(defui side-panel []\n  ($ :.flex.flex-col\n     (let [bt-context (dbfx/use-sub :bt-serial)\n           device (:device bt-context)]\n       ($ bt-device/settings\n          {:device device\n           :on-device-request (partial bt/device-request-callback (:options bt-context))\n           :on-device-forget #(dbfx/dispatch [:bt-disconnect])}))))\n\n(defui terminal-pane []\n  ($ :.flex.flex-col\n     (let [bt-state (hsm-dbfx/use-sub-state :bt-serial)]\n       (if (hsm-dbfx/in-state bt-state :unsupported)\n         ($ bluetooth-unsupported-message)\n         ($ term-widget-dbfx {:event-sub :bt-serial-events :tx-event-id :bt-serial-tx})))))\n\n(defui layout []\n  ($ :.flex.flex-row.gap-1\n     ($ :.basis-80.grow-0 ($ side-panel))\n     ($ :.basis-0.grow\n        ($ terminal-pane))))\n"]}