{"version":3,"sources":["stack/examples/re_frame/pages/local_db.cljs"],"mappings":"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","names":["props__46991__auto__","props98234","uix.core/glue-args","vec__98239","map__98242","cljs.core.nth","cljs.core/--destructure-map","cljs.core.get","f__46992__auto__","js/goog.DEBUG","temp__5823__auto__","stack.examples.re-frame.pages.local-db/datom-table","f__46909__auto__","*current-component*-orig-val__98289","uix.core/*current-component*","*current-component*-temp-val__98290","cljs.core/map?","js/Error","js/Object.defineProperty","obj98304","js/window","js/window.uix","js/window.uix.dev","sig__46918__auto__","js/window.uix.dev.signature!","js/window.uix.dev.register!","datoms","_props","uix.compiler.alpha/component-element","stack.uix.tables/table","uix.compiler.aot/>el","uix.compiler.attributes/interpret-attrs","cljs.core.map","p__98257","vec__98262","idx","datom","p1__98223#","p2__98224#","cljs.core.map_indexed","cljs.core/PersistentVector","uix.compiler.attributes/keyword->string","props98321","vec__98323","map__98327","stack.examples.re-frame.pages.local-db/datom-row","*current-component*-orig-val__98355","*current-component*-temp-val__98356","obj98374","key","stack.examples.re-frame.pages.local-db/inst->ISOString","inst","js/Date","props98403","vec__98408","stack.examples.re-frame.pages.local-db/layout","*current-component*-orig-val__98453","*current-component*-temp-val__98454","obj98460","stack.uix.cards/card","tasks","G__98423","stack.utils.dbfx/use-sub","p__98429","map__98433","id","tx-time","valid-time","p__98444","vec__98446","p1__98397#","p2__98398#"],"sourcesContent":["(ns stack.examples.re-frame.pages.local-db\n  (:require\n   [uix.core :as uix :refer [defui $]]\n   [stack.utils.dbfx :as dbfx]\n   [stack.examples.models.domain]\n   [stack.uix.cards :as cards]\n   [stack.uix.tables :as tables]))\n\n;; This version is for when I implement a proper derived view for the transaction/datoms\n;; (defui datom-table [{:keys [datoms] :as _props}]\n;;   ($ tables/table\n;;      ($ :thead ($ :tr ($ :th \"e\") ($ :th \"a\") ($ :th \"v\") ($ :th \"added\")))\n;;      ($ :tbody\n;;         (for [[idx [{:keys [e a v added]}]] (map-indexed #(vector %1 %2) datoms)]\n;;           ($ :tr {:key idx} ($ :td (str e)) ($ :td (str a)) ($ :td (str v)) ($ :td (str added)))))))\n\n(defui datom-table [{:keys [datoms] :as _props}]\n  ($ tables/table\n     ($ :thead ($ :tr ($ :th \"e\") ($ :th \"a\") ($ :th \"v\") ($ :th \"added\")))\n     ($ :tbody\n        (for [[idx datom] (map-indexed #(vector %1 %2) datoms)]\n          ($ :tr {:key idx} ($ :td (str (:e datom))) ($ :td (str (:a datom))) ($ :td (str (:v datom))) ($ :td (str (:added datom))))))))\n\n(defui datom-row [{:keys [key datom] :as _props}]\n  ($ :tr {:key key} ($ :td {:col-span 3}) ($ :td (str (:e datom))) ($ :td (str (:a datom))) ($ :td (str (:v datom))) ($ :td (str (:added datom)))))\n\n(defn inst->ISOString [inst]\n  (.toISOString (js/Date. inst)))\n\n(defui layout [_props]\n  ($ cards/card {:title \"Local transaction log (IndexedDB)\"}\n     (let [tasks (dbfx/use-sub [:domain-tx-log])]\n       ($ tables/table\n          ($ :thead ($ :tr\n                       ;; tx props\n                       ($ :th \"id\") ($ :th \"tx-time\") ($ :th \"valid-time\")\n                       ;; datom props\n                       ($ :th \"e\") ($ :th \"a\") ($ :th \"v\") ($ :th \"added\")))\n             ;; ($ :tr ($ :td (str tasks)))\n          (for [{:keys [id tx-time valid-time datoms]} tasks]\n\n            ($ :tbody {:key id}\n               ($ :tr\n                  ($ :td (str id))\n                  ;;TODO: This data transformation should be happening in view.cljs\n                  ($ :td (inst->ISOString tx-time)) ($ :td (inst->ISOString valid-time))\n                  ;; Blank the datom columns in this row\n                  ($ :td {:col-span 4}))\n               (for [[idx datom] (map-indexed #(vector %1 %2) datoms)]\n                 ($ datom-row {:key (str id \"-\" idx) :datom datom}))))))))\n"]}